<!doctype html>
<html lang="en">

  <head>
      <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>CovidNow</title>
    <link rel="icon" href="https://www.vivosmartphone.vn/themes/vivo/favicon.ico">
    <meta name="title" content="" />
    <meta name="description" content="" />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="dest/style.min.css">
    <link rel="stylesheet" href="dest/fonts.css">
    <link rel="stylesheet" href="dest/stylelibs.min.css">

    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">

    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/e42952cfb6.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    

    <script>
        function loadComments(){
          console.log(document.getElementById("States").value);
          var url = `http://localhost:5000/covid_data/${document.getElementById("States").value}/comments`;
          $.ajax({url:url, dataType:"json"}).then(function(data) {
            console.log(data);
            var string = '';
            for(var i = 0; i < data.length; i++){
                string += '<div style="width:40%;">' +
            '<div class="card">'+
              '<div class="card-body">' +
                '<p class="card-text"> ' + data[i].username + ':  <br>' + ' <br>' +
                  data[i].comment + ' <br>' + 
                 '</p>' +
              '</div>' +
            '</div>' +
          '</div>'
              
            }

            document.getElementById("commentsSection").innerHTML = string;
          	
          	})
        }
    </script>

    <style>
    		#dropdown{background:dimgrey; text-align:center;}
    		#fillpage{background:dimgrey; color: royalblue; height: 10%;}
        #page_body{background:dimgrey; height: 0%;}
        #States{background:lightgrey; color:blue; font-size: 30px; margin: auto; text-align:center;}
        #coolio{background:lightgrey; color:royalblue; font-size: 30px;}
        #bold{background:lightgrey; color:blue; font-size: 30px;}
        #stattts{background:dimgrey; color:blue; font-size: 30px; margin: auto;}
    </style>
  </head>


  <body>

	    <div id="page_body" class="banner">
        <div class="bg-blur"></div>
        <div class="narbar">
            <div class="container flex j-between">
                <div class="left">
                    <span>C</span>OVID<span>N</span>OW
                    <div class="logo-bottom">FOCUSED ON YOU</div>
                </div>
                <div class="center">
                    <ul class="flex j-between">
                        <a href= "index.html"><li>HOME</li></a>
                        <a href="map.html"><li>STATISTICS</li></a>
                        <a href="chat.html"><li>FORUM</li></a>
                        <a href="signup.html"><li>SIGN UP</li></a>
                        <a href="login.html"><li>SIGN IN</li></a>
                    </ul>
                </div>
                <div class="right"><i class="fas fa-search"></i></div>
            </div>
        </div>
</div>


	<div id="fillpage" class="jumbotron" style="text-align: center;">
    <h2> Pick any state then click submit! </h2>
  	<form>
  	  <label id="coolio" for="States">Choose a State:</label>
  			<select name="States" id="States">
  			    <option>Select...</option>
            <option value="AL">Alabama</option>
  			    <option value="AK">Alaska</option>
  			    <option value="AZ">Arizona</option>
  			    <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
    			</select>
    			<br><br>
    			<button id="bold" type="button" onclick="loadComments()">Submit</button>
  		</form>
	</div>
</div>
<br>
<h2 class="h1" style="text-align:center;">Comments</h2>
<hr>
<div class="row" id="commentsSection">

</div>
<br>
</div>

<!-- tried this form, not ejs so doesnt work because of that I think. How do I connect with the post? -->
<!-- action="'''/:state/comments'" method="post" -->
<form action="http://localhost:5000/covid_data/state/comments" method="post" >
    <div class="form-group row">
        <label class="col-sm-2 col-form-label" for="username">Your Username:</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" name="username" id="username"  placeholder="Enter Your Username" required>
        </div>
    </div>
    <div class="form-group row">
        <label  class="col-sm-2 col-form-label" for="new_comment">Your Comment:</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="new_comment" name="new_comment" placeholder="Enter Your Comment" required>
        </div>
    </div>
    <button type="submit" class="btn btn-primary btn-block" >Submit</button>
</form>

  </body>
</html>
